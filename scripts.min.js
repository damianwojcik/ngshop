!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["angular-file-upload"]=e():t["angular-file-upload"]=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=n(o(1)),i=n(o(2)),a=n(o(3)),s=n(o(4)),c=n(o(5)),u=n(o(6)),l=n(o(7)),p=n(o(8)),d=n(o(9)),f=n(o(10)),h=n(o(11)),m=n(o(12)),g=n(o(13));angular.module(r.default.name,[]).value("fileUploaderOptions",i.default).factory("FileUploader",a.default).factory("FileLikeObject",s.default).factory("FileItem",c.default).factory("FileDirective",u.default).factory("FileSelect",l.default).factory("FileDrop",d.default).factory("FileOver",f.default).factory("Pipeline",p.default).directive("nvFileSelect",h.default).directive("nvFileDrop",m.default).directive("nvFileOver",g.default).run(["FileUploader","FileLikeObject","FileItem","FileDirective","FileSelect","FileDrop","FileOver","Pipeline",function(t,e,o,n,r,i,a,s){t.FileLikeObject=e,t.FileItem=o,t.FileDirective=n,t.FileSelect=r,t.FileDrop=i,t.FileOver=a,t.Pipeline=s}])},function(t,e){t.exports={name:"angularFileUpload"}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1,disableMultipart:!1}},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,o,r,a,y,v,w){var _=r.File,A=r.FormData,$=function(){function r(e){n(this,r);var o=c(t);u(this,o,e,{isUploading:!1,_nextIndex:0,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}return r.prototype.addToQueue=function(t,e,o){var n=this,r=this.isArrayLikeObject(t)?Array.prototype.slice.call(t):[t],a=this._getFilters(o),s=this.queue.length,c=[],u=function(){n.queue.length!==s&&(n._onAfterAddingAll(c),n.progress=n._getTotalProgress()),n._render(),n.autoUpload&&n.uploadAll()};!function t(){var o=r.shift();if(m(o))return u();var s=n.isFile(o)?o:new y(o),l=n._convertFiltersToPipes(a),p=new w(l),d=function(e){var o=e.pipe.originalFilter,r=i(e.args,2),a=r[0],s=r[1];n._onWhenAddingFileFailed(a,o,s),t()},f=function(e,o){var r=new v(n,e,o);c.push(r),n.queue.push(r),n._onAfterAddingFile(r),t()};p.onThrown=d,p.onSuccessful=f,p.exec(s,e)}()},r.prototype.removeFromQueue=function(t){var e=this.getIndexOfItem(t),o=this.queue[e];o.isUploading&&o.cancel(),this.queue.splice(e,1),o._destroy(),this.progress=this._getTotalProgress()},r.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},r.prototype.uploadItem=function(t){var e=this.getIndexOfItem(t),o=this.queue[e],n=this.isHTML5?"_xhrTransport":"_iframeTransport";o._prepareToUploading(),this.isUploading||(this._onBeforeUploadItem(o),o.isCancel||(o.isUploading=!0,this.isUploading=!0,this[n](o),this._render()))},r.prototype.cancelItem=function(t){var e=this,o=this.getIndexOfItem(t),n=this.queue[o],r=this.isHTML5?"_xhr":"_form";n&&(n.isCancel=!0,n.isUploading?n[r].abort():function(){var t=[void 0,0,{}];a(function(){e._onCancelItem.apply(e,[n].concat(t)),e._onCompleteItem.apply(e,[n].concat(t))})}())},r.prototype.uploadAll=function(){var t=this.getNotUploadedItems().filter(function(t){return!t.isUploading});t.length&&(l(t,function(t){return t._prepareToUploading()}),t[0].upload())},r.prototype.cancelAll=function(){var t=this.getNotUploadedItems();l(t,function(t){return t.cancel()})},r.prototype.isFile=function(t){return this.constructor.isFile(t)},r.prototype.isFileLikeObject=function(t){return this.constructor.isFileLikeObject(t)},r.prototype.isArrayLikeObject=function(t){return this.constructor.isArrayLikeObject(t)},r.prototype.getIndexOfItem=function(t){return d(t)?t:this.queue.indexOf(t)},r.prototype.getNotUploadedItems=function(){return this.queue.filter(function(t){return!t.isUploaded})},r.prototype.getReadyItems=function(){return this.queue.filter(function(t){return t.isReady&&!t.isUploading}).sort(function(t,e){return t.index-e.index})},r.prototype.destroy=function(){var t=this;l(this._directives,function(e){l(t._directives[e],function(t){t.destroy()})})},r.prototype.onAfterAddingAll=function(t){},r.prototype.onAfterAddingFile=function(t){},r.prototype.onWhenAddingFileFailed=function(t,e,o){},r.prototype.onBeforeUploadItem=function(t){},r.prototype.onProgressItem=function(t,e){},r.prototype.onProgressAll=function(t){},r.prototype.onSuccessItem=function(t,e,o,n){},r.prototype.onErrorItem=function(t,e,o,n){},r.prototype.onCancelItem=function(t,e,o,n){},r.prototype.onCompleteItem=function(t,e,o,n){},r.prototype.onCompleteAll=function(){},r.prototype._getTotalProgress=function(t){if(this.removeAfterUpload)return t||0;var e=this.getNotUploadedItems().length,o=e?this.queue.length-e:this.queue.length,n=100/this.queue.length,r=(t||0)*n/100;return Math.round(o*n+r)},r.prototype._getFilters=function(t){if(!t)return this.filters;if(h(t))return t;var e=t.match(/[^\s,]+/g);return this.filters.filter(function(t){return-1!==e.indexOf(t.name)})},r.prototype._convertFiltersToPipes=function(t){var e=this;return t.map(function(t){var o=s(e,t.fn);return o.isAsync=3===t.fn.length,o.originalFilter=t,o})},r.prototype._render=function(){e.$$phase||e.$apply()},r.prototype._folderFilter=function(t){return!(!t.size&&!t.type)},r.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},r.prototype._isSuccessCode=function(t){return t>=200&&300>t||304===t},r.prototype._transformResponse=function(t,e){var n=this._headersGetter(e);return l(o.defaults.transformResponse,function(e){t=e(t,n)}),t},r.prototype._parseHeaders=function(t){var e,o,n,r={};return t?(l(t.split("\n"),function(t){n=t.indexOf(":"),e=t.slice(0,n).trim().toLowerCase(),o=t.slice(n+1).trim(),e&&(r[e]=r[e]?r[e]+", "+o:o)}),r):r},r.prototype._headersGetter=function(t){return function(e){return e?t[e.toLowerCase()]||null:t}},r.prototype._xhrTransport=function(t){var e,o=this,n=t._xhr=new XMLHttpRequest;if(t.disableMultipart?e=t._file:(e=new A,l(t.formData,function(t){l(t,function(t,o){e.append(o,t)})}),e.append(t.alias,t._file,t.file.name)),"number"!=typeof t._file.size)throw new TypeError("The file specified is no longer valid");n.upload.onprogress=function(e){var n=Math.round(e.lengthComputable?100*e.loaded/e.total:0);o._onProgressItem(t,n)},n.onload=function(){var e=o._parseHeaders(n.getAllResponseHeaders()),r=o._transformResponse(n.response,e),i=o._isSuccessCode(n.status)?"Success":"Error";o["_on"+i+"Item"](t,r,n.status,e),o._onCompleteItem(t,r,n.status,e)},n.onerror=function(){var e=o._parseHeaders(n.getAllResponseHeaders()),r=o._transformResponse(n.response,e);o._onErrorItem(t,r,n.status,e),o._onCompleteItem(t,r,n.status,e)},n.onabort=function(){var e=o._parseHeaders(n.getAllResponseHeaders()),r=o._transformResponse(n.response,e);o._onCancelItem(t,r,n.status,e),o._onCompleteItem(t,r,n.status,e)},n.open(t.method,t.url,!0),n.withCredentials=t.withCredentials,l(t.headers,function(t,e){n.setRequestHeader(e,t)}),n.send(e)},r.prototype._iframeTransport=function(t){var e=this,o=g('<form style="display: none;" />'),n=g('<iframe name="iframeTransport'+Date.now()+'">'),r=t._input;t._form&&t._form.replaceWith(r),t._form=o,r.prop("name",t.alias),l(t.formData,function(t){l(t,function(t,e){var n=g('<input type="hidden" name="'+e+'" />');n.val(t),o.append(n)})}),o.prop({action:t.url,method:"POST",target:n.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),n.bind("load",function(){var o="",r=200;try{o=n[0].contentDocument.body.innerHTML}catch(t){r=500}var i={response:o,status:r,dummy:!0},a={},s=e._transformResponse(i.response,a);e._onSuccessItem(t,s,i.status,a),e._onCompleteItem(t,s,i.status,a)}),o.abort=function(){var i,a={status:0,dummy:!0},s={};n.unbind("load").prop("src","javascript:false;"),o.replaceWith(r),e._onCancelItem(t,i,a.status,s),e._onCompleteItem(t,i,a.status,s)},r.after(o),o.append(r).append(n),o[0].submit()},r.prototype._onWhenAddingFileFailed=function(t,e,o){this.onWhenAddingFileFailed(t,e,o)},r.prototype._onAfterAddingFile=function(t){this.onAfterAddingFile(t)},r.prototype._onAfterAddingAll=function(t){this.onAfterAddingAll(t)},r.prototype._onBeforeUploadItem=function(t){t._onBeforeUpload(),this.onBeforeUploadItem(t)},r.prototype._onProgressItem=function(t,e){var o=this._getTotalProgress(e);this.progress=o,t._onProgress(e),this.onProgressItem(t,e),this.onProgressAll(o),this._render()},r.prototype._onSuccessItem=function(t,e,o,n){t._onSuccess(e,o,n),this.onSuccessItem(t,e,o,n)},r.prototype._onErrorItem=function(t,e,o,n){t._onError(e,o,n),this.onErrorItem(t,e,o,n)},r.prototype._onCancelItem=function(t,e,o,n){t._onCancel(e,o,n),this.onCancelItem(t,e,o,n)},r.prototype._onCompleteItem=function(t,e,o,n){t._onComplete(e,o,n),this.onCompleteItem(t,e,o,n);var r=this.getReadyItems()[0];return this.isUploading=!1,f(r)?void r.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},r.isFile=function(t){return _&&t instanceof _},r.isFileLikeObject=function(t){return t instanceof y},r.isArrayLikeObject=function(t){return p(t)&&"length"in t},r.inherit=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.super_=e},r}();return $.prototype.isHTML5=!(!_||!A),$.isHTML5=$.prototype.isHTML5,$}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var o=[],n=!0,r=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=r;var a=(function(t){return t&&t.__esModule?t:{default:t}}(o(1)),angular),s=a.bind,c=a.copy,u=a.extend,l=a.forEach,p=a.isObject,d=a.isNumber,f=a.isDefined,h=a.isArray,m=a.isUndefined,g=a.element;r.$inject=["fileUploaderOptions","$rootScope","$http","$window","$timeout","FileLikeObject","FileItem","Pipeline"]},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){return function(){function t(e){n(this,t);var o=s(e)?e.value:e;this["_createFrom"+(c(o)?"FakePath":"Object")](o)}return t.prototype._createFromFakePath=function(t){this.lastModifiedDate=null,this.size=null,this.type="like/"+t.slice(t.lastIndexOf(".")+1).toLowerCase(),this.name=t.slice(t.lastIndexOf("/")+t.lastIndexOf("\\")+2)},t.prototype._createFromObject=function(t){this.lastModifiedDate=a(t.lastModifiedDate),this.size=t.size,this.type=t.type,this.name=t.name},t}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=(function(t){return t&&t.__esModule?t:{default:t}}(o(1)),angular),a=i.copy,s=i.isElement,c=i.isString},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return function(){function o(t,r,i){n(this,o);var l=u(r),p=l?c(r):null,d=l?null:r;s(this,{url:t.url,alias:t.alias,headers:a(t.headers),formData:a(t.formData),removeAfterUpload:t.removeAfterUpload,withCredentials:t.withCredentials,disableMultipart:t.disableMultipart,method:t.method},i,{uploader:t,file:new e(r),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:d,_input:p}),p&&this._replaceNode(p)}return o.prototype.upload=function(){try{this.uploader.uploadItem(this)}catch(e){var t=e.name+":"+e.message;this.uploader._onCompleteItem(this,t,e.code,[]),this.uploader._onErrorItem(this,t,e.code,[])}},o.prototype.cancel=function(){this.uploader.cancelItem(this)},o.prototype.remove=function(){this.uploader.removeFromQueue(this)},o.prototype.onBeforeUpload=function(){},o.prototype.onProgress=function(t){},o.prototype.onSuccess=function(t,e,o){},o.prototype.onError=function(t,e,o){},o.prototype.onCancel=function(t,e,o){},o.prototype.onComplete=function(t,e,o){},o.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},o.prototype._onProgress=function(t){this.progress=t,this.onProgress(t)},o.prototype._onSuccess=function(t,e,o){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(t,e,o)},o.prototype._onError=function(t,e,o){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(t,e,o)},o.prototype._onCancel=function(t,e,o){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(t,e,o)},o.prototype._onComplete=function(t,e,o){this.onComplete(t,e,o),this.removeAfterUpload&&this.remove()},o.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},o.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},o.prototype._replaceNode=function(e){var o=t(e.clone())(e.scope());o.prop("value",null),e.css("display","none"),e.after(o)},o}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=(function(t){return t&&t.__esModule?t:{default:t}}(o(1)),angular),a=i.copy,s=i.extend,c=i.element,u=i.isElement;r.$inject=["$compile","FileLikeObject"]},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){var t=function(){function t(e){n(this,t),i(this,e),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}return t.prototype.bind=function(){for(var t in this.events){var e=this.events[t];this.element.bind(t,this[e])}},t.prototype.unbind=function(){for(var t in this.events)this.element.unbind(t,this.events[t])},t.prototype.destroy=function(){var t=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(t,1),this.unbind()},t.prototype._saveLinks=function(){for(var t in this.events){var e=this.events[t];this[e]=this[e].bind(this)}},t}();return t.prototype.events={},t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=(function(t){return t&&t.__esModule?t:{default:t}}(o(1)),angular).extend},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){return function(e){function o(t){n(this,o);var i=s(t,{events:{$destroy:"destroy",change:"onChange"},prop:"select"}),a=r(this,e.call(this,i));return a.uploader.isHTML5||a.element.removeAttr("multiple"),a.element.prop("value",null),a}return i(o,e),o.prototype.getOptions=function(){},o.prototype.getFilters=function(){},o.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},o.prototype.onChange=function(){var e=this.uploader.isHTML5?this.element[0].files:this.element[0],o=this.getOptions(),n=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(e,o,n),this.isEmptyAfterSelection()&&(this.element.prop("value",null),this.element.replaceWith(t(this.element.clone())(this.scope)))},o}(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var s=(function(t){return t&&t.__esModule?t:{default:t}}(o(1)),angular).extend;a.$inject=["$compile","FileDirective"]},function(t,e){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];n(this,e),this.pipes=t}return e.prototype.next=function(e){var n=this.pipes.shift();if(s(n))this.onSuccessful.apply(this,o(e));else{var r=new Error("The filter has not passed");if(r.pipe=n,r.args=e,n.isAsync){var i=t.defer(),c=a(this,this.next,e),u=a(this,this.onThrown,r);i.promise.then(c,u),n.apply(void 0,o(e).concat([i]))}else Boolean(n.apply(void 0,o(e)))?this.next(e):this.onThrown(r)}},e.prototype.exec=function(){for(var t=arguments.length,e=Array(t),o=0;t>o;o++)e[o]=arguments[o];this.next(e)},e.prototype.onThrown=function(t){},e.prototype.onSuccessful=function(){},e}()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=angular,a=i.bind,s=i.isUndefined;r.$inject=["$q"]},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return function(t){function e(o){n(this,e);var i=c(o,{events:{$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},prop:"drop"});return r(this,t.call(this,i))}return i(e,t),e.prototype.getOptions=function(){},e.prototype.getFilters=function(){},e.prototype.onDrop=function(t){var e=this._getTransfer(t);if(e){var o=this.getOptions(),n=this.getFilters();this._preventAndStop(t),u(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(e.files,o,n)}},e.prototype.onDragOver=function(t){var e=this._getTransfer(t);this._haveFiles(e.types)&&(e.dropEffect="copy",this._preventAndStop(t),u(this.uploader._directives.over,this._addOverClass,this))},e.prototype.onDragLeave=function(t){t.currentTarget!==this.element[0]&&(this._preventAndStop(t),u(this.uploader._directives.over,this._removeOverClass,this))},e.prototype._getTransfer=function(t){return t.dataTransfer?t.dataTransfer:t.originalEvent.dataTransfer},e.prototype._preventAndStop=function(t){t.preventDefault(),t.stopPropagation()},e.prototype._haveFiles=function(t){return!!t&&(t.indexOf?-1!==t.indexOf("Files"):!!t.contains&&t.contains("Files"))},e.prototype._addOverClass=function(t){t.addOverClass()},e.prototype._removeOverClass=function(t){t.removeOverClass()},e}(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var s=(function(t){return t&&t.__esModule?t:{default:t}}(o(1)),angular),c=s.extend,u=s.forEach;a.$inject=["FileDirective"]},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return function(t){function e(o){n(this,e);var i=s(o,{events:{$destroy:"destroy"},prop:"over",overClass:"nv-file-over"});return r(this,t.call(this,i))}return i(e,t),e.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},e.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},e.prototype.getOverClass=function(){return this.overClass},e}(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var s=(function(t){return t&&t.__esModule?t:{default:t}}(o(1)),angular).extend;a.$inject=["FileDirective"]},function(t,e,o){"use strict";function n(t,e,o){return{link:function(n,r,i){var a=n.$eval(i.uploader);if(!(a instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var s=new o({uploader:a,element:r,scope:n});s.getOptions=t(i.options).bind(s,n),s.getFilters=function(){return i.filters}}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,function(t){t&&t.__esModule}(o(1)),n.$inject=["$parse","FileUploader","FileSelect"]},function(t,e,o){"use strict";function n(t,e,o){return{link:function(n,r,i){var a=n.$eval(i.uploader);if(!(a instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');if(a.isHTML5){var s=new o({uploader:a,element:r});s.getOptions=t(i.options).bind(s,n),s.getFilters=function(){return i.filters}}}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,function(t){t&&t.__esModule}(o(1)),n.$inject=["$parse","FileUploader","FileDrop"]},function(t,e,o){"use strict";function n(t,e){return{link:function(o,n,r){var i=o.$eval(r.uploader);if(!(i instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new e({uploader:i,element:n});a.getOverClass=function(){return r.overClass||a.overClass}}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,function(t){t&&t.__esModule}(o(1)),n.$inject=["FileUploader","FileOver"]}])}),function(){angular.module("angular-jwt",["angular-jwt.options","angular-jwt.interceptor","angular-jwt.jwt","angular-jwt.authManager"]),angular.module("angular-jwt.authManager",[]).provider("authManager",function(){this.$get=["$rootScope","$injector","$location","jwtHelper","jwtInterceptor","jwtOptions",function(t,e,o,n,r,i){function a(t){return Array.isArray(t)?e.invoke(t,this,{options:null}):t()}function s(t){if(Array.isArray(t)||angular.isFunction(t))return e.invoke(t,h,{});throw new Error("unauthenticatedRedirector must be a function")}function c(){var t=a(h.tokenGetter);return t?!n.isTokenExpired(t):void 0}function u(){t.isAuthenticated=!0}function l(){t.isAuthenticated=!1}function p(){t.$on("$locationChangeStart",function(){var e=a(h.tokenGetter);e&&(n.isTokenExpired(e)?t.$broadcast("tokenHasExpired",e):u())})}function d(){t.$on("unauthenticated",function(){s(h.unauthenticatedRedirector),l()})}function f(t,e){if(!e)return!1;var o=e.$$route?e.$$route:e.data;if(o&&!0===o.requiresLogin){var r=a(h.tokenGetter);(!r||n.isTokenExpired(r))&&(t.preventDefault(),s(h.unauthenticatedRedirector))}}var h=i.getConfig();t.isAuthenticated=!1;var m=e.has("$state")?"$stateChangeStart":"$routeChangeStart";return t.$on(m,f),{authenticate:u,unauthenticate:l,getToken:function(){return a(h.tokenGetter)},redirect:function(){return s(h.unauthenticatedRedirector)},checkAuthOnRefresh:p,redirectWhenUnauthenticated:d,isAuthenticated:c}}]}),angular.module("angular-jwt.interceptor",[]).provider("jwtInterceptor",function(){this.urlParam,this.authHeader,this.authPrefix,this.whiteListedDomains,this.tokenGetter;var t=this;this.$get=["$q","$injector","$rootScope","urlUtils","jwtOptions",function(e,o,n,r,i){function a(t){if(!r.isSameOrigin(t)&&!s.whiteListedDomains.length)throw new Error("As of v0.1.0, requests to domains other than the application's origin must be white listed. Use jwtOptionsProvider.config({ whiteListedDomains: [<domain>] }); to whitelist.");for(var e=r.urlResolve(t).hostname.toLowerCase(),o=0;o<s.whiteListedDomains.length;o++){var n=s.whiteListedDomains[o],i=n instanceof RegExp?n:new RegExp(n,"i");if(e.match(i))return!0}return!!r.isSameOrigin(t)}var s=angular.extend({},i.getConfig(),t);return{request:function(t){if(t.skipAuthorization||!a(t.url))return t;if(s.urlParam){if(t.params=t.params||{},t.params[s.urlParam])return t}else if(t.headers=t.headers||{},t.headers[s.authHeader])return t;return e.when(o.invoke(s.tokenGetter,this,{options:t})).then(function(e){return e&&(s.urlParam?t.params[s.urlParam]=e:t.headers[s.authHeader]=s.authPrefix+e),t})},responseError:function(t){return 401===t.status&&n.$broadcast("unauthenticated",t),e.reject(t)}}}]}),angular.module("angular-jwt.jwt",[]).service("jwtHelper",["$window",function(t){this.urlBase64Decode=function(e){var o=e.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw"Illegal base64url string!"}return t.decodeURIComponent(escape(t.atob(o)))},this.decodeToken=function(t){var e=t.split(".");if(3!==e.length)throw new Error("JWT must have 3 parts");var o=this.urlBase64Decode(e[1]);if(!o)throw new Error("Cannot decode the token");return angular.fromJson(o)},this.getTokenExpirationDate=function(t){var e=this.decodeToken(t);if(void 0===e.exp)return null;var o=new Date(0);return o.setUTCSeconds(e.exp),o},this.isTokenExpired=function(t,e){var o=this.getTokenExpirationDate(t);return e=e||0,null!==o&&!(o.valueOf()>(new Date).valueOf()+1e3*e)}}]),angular.module("angular-jwt.options",[]).provider("jwtOptions",function(){var t={};this.config=function(e){t=e},this.$get=function(){function e(){this.config=angular.extend({},o,t)}var o={urlParam:null,authHeader:"Authorization",authPrefix:"Bearer ",whiteListedDomains:[],tokenGetter:function(){return null},loginPath:"/",unauthenticatedRedirectPath:"/",unauthenticatedRedirector:["$location",function(t){t.path(this.unauthenticatedRedirectPath)}]};return e.prototype.getConfig=function(){return this.config},new e}}),angular.module("angular-jwt.interceptor").service("urlUtils",function(){function t(t){var e=t;return o.setAttribute("href",e),e=o.href,o.setAttribute("href",e),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}function e(e){var o=angular.isString(e)?t(e):e;return o.protocol===n.protocol&&o.host===n.host}var o=document.createElement("a"),n=t(window.location.href);return{urlResolve:t,isSameOrigin:e}})}(),function(){angular.module("angular-storage",["angular-storage.store"]),angular.module("angular-storage.cookieStorage",[]).service("cookieStorage",["$cookies",function(t){this.set=function(e,o){return t.put(e,o)},this.get=function(e){return t.get(e)},this.remove=function(e){return t.remove(e)}}]),angular.module("angular-storage.internalStore",["angular-storage.localStorage","angular-storage.sessionStorage"]).factory("InternalStore",["$log","$injector",function(t,e){function o(t,o,n,r){this.namespace=t||null,(angular.isUndefined(r)||null==r)&&(r=!0),this.useCache=r,this.delimiter=n||".",this.inMemoryCache={},this.storage=e.get(o||"localStorage")}return o.prototype.getNamespacedKey=function(t){return this.namespace?[this.namespace,t].join(this.delimiter):t},o.prototype.set=function(t,e){this.useCache&&(this.inMemoryCache[t]=e),this.storage.set(this.getNamespacedKey(t),JSON.stringify(e))},o.prototype.get=function(e){var o=null;if(this.useCache&&e in this.inMemoryCache)return this.inMemoryCache[e];var n=this.storage.get(this.getNamespacedKey(e));try{o=void 0===n||"undefined"===n?void 0:JSON.parse(n),this.useCache&&(this.inMemoryCache[e]=o)}catch(o){t.error("Error parsing saved value",o),this.remove(e)}return o},o.prototype.remove=function(t){this.useCache&&(this.inMemoryCache[t]=null),this.storage.remove(this.getNamespacedKey(t))},o}]),angular.module("angular-storage.localStorage",["angular-storage.cookieStorage"]).service("localStorage",["$window","$injector",function(t,e){var o;try{t.localStorage.setItem("testKey","test"),t.localStorage.removeItem("testKey"),o=!0}catch(t){o=!1}if(o)this.set=function(e,o){return t.localStorage.setItem(e,o)},this.get=function(e){return t.localStorage.getItem(e)},this.remove=function(e){return t.localStorage.removeItem(e)},this.clear=function(){t.localStorage.clear()};else{var n=e.get("cookieStorage");this.set=n.set,this.get=n.get,this.remove=n.remove}}]),angular.module("angular-storage.sessionStorage",["angular-storage.cookieStorage"]).service("sessionStorage",["$window","$injector",function(t,e){var o;try{t.sessionStorage.setItem("testKey","test"),t.sessionStorage.removeItem("testKey"),o=!0}catch(t){o=!1}if(o)this.set=function(e,o){return t.sessionStorage.setItem(e,o)},this.get=function(e){return t.sessionStorage.getItem(e)},this.remove=function(e){return t.sessionStorage.removeItem(e)};else{var n=e.get("cookieStorage");this.set=n.set,this.get=n.get,this.remove=n.remove}}]),angular.module("angular-storage.store",["angular-storage.internalStore"]).provider("store",function(){var t="localStorage",e=!0;this.setStore=function(e){e&&angular.isString(e)&&(t=e)},this.setCaching=function(t){e=!!t},this.$get=["InternalStore",function(o){var n=new o(null,t,null,e);return n.getNamespacedStore=function(t,e,n,r){return new o(t,e,n,r)},n}]})}();var app=angular.module("app",["ngRoute","angular-storage","angular-jwt","controllersNavigation","controllersAdmin","controllersSite","myServices"]);app.config(["$routeProvider","$httpProvider","$locationProvider",function(t,e,o){o.hashPrefix(""),t.when("/admin/products",{controller:"products",templateUrl:"partials/admin/products.html"}).when("/admin/product/edit/:id",{controller:"productEdit",templateUrl:"partials/admin/product-edit.html"}).when("/admin/product/create",{controller:"productCreate",templateUrl:"partials/admin/product-create.html"}).when("/admin/categories",{controller:"categories",templateUrl:"partials/admin/categories.html"}).when("/admin/category/edit/:id",{controller:"categoryEdit",templateUrl:"partials/admin/category-edit.html"}).when("/admin/category/create",{controller:"categoryCreate",templateUrl:"partials/admin/category-create.html"}).when("/admin/users",{controller:"users",templateUrl:"partials/admin/users.html"}).when("/admin/user/edit/:id",{controller:"userEdit",templateUrl:"partials/admin/user-edit.html"}).when("/admin/user/create",{controller:"userCreate",templateUrl:"partials/admin/user-create.html"}).when("/admin/orders",{controller:"orders",templateUrl:"partials/admin/orders.html"}).when("/admin/:slug",{controller:"adminCategory",templateUrl:"partials/admin/category.html"}).when("/products",{controller:"siteProducts",templateUrl:"partials/site/products.html"}).when("/product/:id",{controller:"siteProduct",templateUrl:"partials/site/product.html"}).when("/cart",{controller:"cartCtrl",templateUrl:"partials/site/cart.html"}).when("/orders",{controller:"siteOrders",templateUrl:"partials/site/orders.html"}).when("/login",{controller:"login",templateUrl:"partials/site/login.html"}).when("/register",{controller:"register",templateUrl:"partials/site/register.html"}).when("/admin",{controller:"adminHome",templateUrl:"partials/admin/home.html"}).when("/",{controller:"siteHome",templateUrl:"partials/site/home.html"}).when("/404",{controller:"404",templateUrl:"partials/site/404.html"}).when("/:slug",{controller:"siteCategory",templateUrl:"partials/site/category.html"}).otherwise({redirectTo:"/404"})}]);var myDirectives=angular.module("myDirectives",[]);myDirectives.directive("ngThumb",["$window",function(t){var e={support:!(!t.FileReader||!t.CanvasRenderingContext2D),isFile:function(e){return angular.isObject(e)&&e instanceof t.File},isImage:function(t){var e="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(e)}};return{restrict:"A",template:"<canvas/>",link:function(t,o,n){function r(t){var e=new Image;e.onload=i,e.src=t.target.result}function i(){var t=a.width||this.width/this.height*a.height,e=a.height||this.height/this.width*a.width;s.attr({width:t,height:e}),s[0].getContext("2d").drawImage(this,0,0,t,e)}if(e.support){var a=t.$eval(n.ngThumb);if(e.isFile(a.file)&&e.isImage(a.file)){var s=o.find("canvas"),c=new FileReader;c.onload=r,c.readAsDataURL(a.file)}}}}}]),myDirectives.directive("onFinishRender",function(t){return{restrict:"A",link:function(e,o,n){!0===e.$last&&t(function(){e.$emit(n.onFinishRender)})}}}),myDirectives.directive("owlCarousel",function(){return{restrict:"E",transclude:!1,link:function(t){t.initCarousel=function(e){var o={},n=t.$eval($(e).attr("data-options"));for(var r in n)o[r]=n[r];$(e).owlCarousel(o)}}}}),myDirectives.directive("owlCarouselItem",[function(){return{restrict:"A",transclude:!1,link:function(t,e){t.$last&&t.initCarousel(e.parent())}}}]);var myServices=angular.module("myServices",[]);myServices.factory("cartService",["store",function(t){if(t.get("cart"))e=t.get("cart");else var e=[];return e.show=function(){return e},e.add=function(o){var n=!0;angular.forEach(e,function(t,r){t.name==o.name&&(n=!1,e[r].amount++)}),n&&(o.amount=1,e.push(o)),t.set("cart",e)},e.empty=function(){t.remove("cart"),e.length=0},e.update=function(e){t.set("cart",e)},e}]),myServices.service("checkToken",["store","jwtHelper",function(t,e){if(t.get("token"))e.decodeToken(t.get("token"));else;this.payload=function(){return!!t.get("token")&&e.decodeToken(t.get("token"))},this.loggedIn=function(){return!!t.get("token")},this.isAdmin=function(){return!!t.get("token")&&"admin"==e.decodeToken(t.get("token")).role},this.raw=function(){return t.get("token")},this.del=function(){t.remove("token")}}]),myServices.service("productsService",["$http",function(t){this.getByCategoryId=function(e){return t.get("api/site/products/getByCategoryId/"+e).then(function(t){return t},function(){console.log("Error on communicate with API.")})},this.getCategoryName=function(e){return t.get("api/site/products/getCategoryName/"+e).then(function(t){return t},function(){console.log("Error on communicate with API.")})},this.getByCategorySlug=function(e){return t.get("api/site/products/getByCategorySlug/"+e).then(function(t){return t},function(){console.log("Error on communicate with API.")})}}]),myServices.service("categoriesService",["$http",function(t){this.getData=function(){return t.get("api/site/categories/get").then(function(t){return t},function(){console.log("Error on communicate with API.")})},this.getByCategorySlug=function(e){return t.get("api/site/categories/getByCategorySlug/"+e).then(function(t){return t},function(){console.log("Error on communicate with API.")})}}]),myServices.factory("sliderFactory",["$http","checkToken",function(t,e){var o={};return t.get("api/site/promotions/get").then(function(t){o=t.data},function(){console.log("Error on communicate with API.")}),o.show=function(){return o},o.delete=function(o){t.post("api/admin/promotions/delete/",{token:e.raw(),promotion:o},function(){console.log("Error on communicate with API.")})},o}]);var controllersAdmin=angular.module("controllersAdmin",["angularFileUpload","myDirectives","ui.select","angular-owl-carousel-2","ngAnimate","ngSanitize","ui.bootstrap"]);controllersAdmin.controller("products",["$scope","$http","checkToken","productsService",function(t,e,o,n){e.post("api/admin/products/get",{token:o.raw()}).then(function(e){t.products=e.data,angular.forEach(t.products,function(t){n.getCategoryName(t.category).then(function(e){t.categoryName=e.data.replace(/['"]+/g,"")})})},function(){console.log("Error on communicate with API.")}),t.delete=function(n,r){if(!confirm("Are you really want to delete this product?"))return!1;t.products.splice(r,1),e.post("api/admin/products/delete/",{token:o.raw(),product:n},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("productEdit",["$scope","$http","$routeParams","FileUploader","$timeout","checkToken","categoriesService",function(t,e,o,n,r,i,a){function s(){e.post("api/admin/images/get/"+c,{token:i.raw()}).then(function(e){t.images=e.data},function(){console.log("Error on communicate with API.")})}var c=o.id;t.id=c,e.post("api/admin/products/get/"+c,{token:i.raw()}).then(function(e){t.product=e.data,a.getData().then(function(e){t.categories=e.data,angular.forEach(t.categories,function(e){e.id==t.product.category&&(t.product.category=e)})})},function(){console.log("Error on communicate with API.")}),s();var u=t.uploader=new n({token:i.raw(),url:"api/admin/images/upload/"+c});u.filters.push({name:"imageFilter",fn:function(t,e){var o="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(o)}}),u.onCompleteItem=function(e,o,n,r){s(),t.product.thumbnail="uploads/"+c+"/"+e._file.name},t.delImage=function(o,n){t.images.splice(n,1),e.post("api/admin/images/delete/",{token:i.raw(),id:c,image:o},function(){console.log("Error on communicate with API.")})},t.setThumbnail=function(e,o){t.product.thumbnail==o?t.product.thumbnail="":t.product.thumbnail=o},t.saveChanges=function(o){o&&(o.category=o.category.id),e.post("api/admin/products/update/",{token:i.raw(),product:o}).then(function(){t.success=!0,angular.forEach(t.categories,function(e){e.id==t.product.category&&(t.product.category=e)}),r(function(){t.success=!1},3e3)},function(){console.log("Error on communicate with API.")}),e.post("api/admin/images/setThumbnail/",{token:i.raw(),product:o,image:o.thumbnail},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("productCreate",["$scope","$http","$timeout","checkToken","categoriesService",function(t,e,o,n,r){t.product={},r.getData().then(function(e){t.categories=e.data,t.product.category=e.data[0]}),t.createProduct=function(i){i&&(i.category=i.category.id),e.post("api/admin/products/create/",{token:n.raw(),product:i}).then(function(){t.success=!0,t.product={},o(function(){t.success=!1,r.getData().then(function(e){t.categories=e.data,t.product.category=e.data[0]})},3e3)},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("categories",["$scope","$http","categoriesService","productsService","checkToken",function(t,e,o,n,r){o.getData().then(function(e){t.categories=e.data}),t.products=[],t.productsCount=[],t.getProducts=function(e){n.getByCategoryId(e).then(function(o){t.products[e]=o.data,t.productsCount[e]=t.products[e].length})},t.delete=function(o,n){if(!confirm("Are you really want to delete this category?"))return!1;t.categories.splice(n,1),e.post("api/admin/categories/delete/",{token:r.raw(),category:o},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("categoryCreate",["$scope","$http","$timeout","checkToken","categoriesService","productsService",function(t,e,o,n,r,i){t.category={},r.getData().then(function(e){t.categories=e.data,t.category.id=t.categories.length+1}),i.getByCategoryId(1).then(function(e){t.products=e.data}),t.createCategory=function(a,s){angular.forEach(s.selected,function(o){o.category=a.id,e.post("api/admin/products/update/",{token:n.raw(),product:o}).then(function(){t.success=!0},function(){console.log("Error on communicate with API.")})}),e.post("api/admin/categories/create/",{token:n.raw(),category:a}).then(function(){t.success=!0,t.category={},r.getData().then(function(e){t.categories=e.data,t.category.id=t.categories.length+1}),i.getByCategoryId(1).then(function(e){t.products=e.data}),o(function(){t.success=!1},3e3)},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("categoryEdit",["$scope","$http","$q","$timeout","$routeParams","checkToken",function(t,e,o,n,r,i){Array.prototype.diff=function(t){return this.filter(function(e){return t.indexOf(e)<0})};var a=r.id;t.id=a,e.post("api/admin/categories/get/"+a,{token:i.raw()}).then(function(e){t.category=e},function(){console.log("Error on communicate with API.")}),t.productsUncategorized=e.get("api/site/products/getByCategoryId/1",{cache:!1}),t.productsFromCategory=e.get("api/site/products/getByCategoryId/"+a,{cache:!1}),o.all([t.productsUncategorized,t.productsFromCategory]).then(function(e){t.products=e[0].data.concat(e[1].data)}),e.get("api/site/products/getByCategoryId/"+a).then(function(e){t.products.selected=e},function(){console.log("Error on communicate with API.")}),t.saveChanges=function(o,r){var a=r.filter(function(t){return t.id!==r.length}),s=[];s=a.length===r.selected.length?[]:a.diff(r.selected),e.post("api/admin/categories/update/",{token:i.raw(),category:o}).then(function(){t.success=!0,n(function(){t.success=!1},3e3)},function(){console.log("Error on communicate with API.")}),angular.forEach(r.selected,function(n){n.category=o.id,e.post("api/admin/products/update/",{token:i.raw(),product:n}).then(function(){t.success=!0},function(){console.log("Error on communicate with API.")})}),s.length&&angular.forEach(s,function(o){o.category=1,e.post("api/admin/products/update/",{token:i.raw(),product:o}).then(function(){t.success=!0},function(){console.log("Error on communicate with API.")})})}}]),controllersAdmin.controller("users",["$scope","$http","checkToken",function(t,e,o){e.post("api/admin/users/get",{token:o.raw()}).then(function(e){t.users=e.data},function(){console.log("Error on communicate with API.")}),t.delete=function(n,r){if(!confirm("Are you really want to delete this user?"))return!1;t.users.splice(r,1),e.post("api/admin/users/delete/",{token:o.raw(),user:n},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("userEdit",["$scope","$http","$routeParams","$timeout","checkToken",function(t,e,o,n,r){var i=o.id;t.id=i,e.post("api/admin/users/get/"+i,{token:r.raw()}).then(function(e){t.user=e.data},function(){console.log("Error on communicate with API.")}),t.saveChanges=function(o){e.post("api/admin/users/update/",{token:r.raw(),id:i,user:o,firstName:o.firstName,lastName:o.lastName,email:o.email,password:o.password,passconf:o.passconf}).then(function(e){t.submit=!0,e?t.errors=e.data:(t.success=!0,n(function(){t.success=!1},3e3)),t.submit=!0},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("userCreate",["$scope","$http","$timeout","checkToken",function(t,e,o,n){t.user={},t.user.role="user",t.createUser=function(r){e.post("api/admin/users/create/",{token:n.raw(),user:r,firstName:r.firstName,lastName:r.lastName,email:r.email,password:r.password,passconf:r.passconf}).then(function(e){e.data?t.errors=e.data:(t.user={},t.success=!0,t.errors={},o(function(){t.success=!1},3e3)),t.submit=!0},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("orders",["$scope","$http","checkToken",function(t,e,o){e.post("api/admin/orders/get/",{token:o.raw(),payload:o.payload()}).then(function(e){t.orders=e,angular.forEach(t.orders,function(e,o){var n=JSON.parse(e.items);t.orders[o].items=n})},function(){console.log("Error on communicate with API.")}),t.delete=function(n,r){if(!confirm("Are you really want to delete this order?"))return!1;t.orders.splice(r,1),e.post("api/admin/orders/delete/",{token:o.raw(),id:n.id},function(){console.log("Error on communicate with API.")})},t.changeStatus=function(t){0==t.status?t.status=1:t.status=0,e.post("api/admin/orders/update/",{token:o.raw(),id:t.id,status:t.status},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("adminCategory",["$scope","$http","$location","$window","$routeParams","productsService","categoriesService","checkToken",function(t,e,o,n,r,i,a,s){var c=r.slug;i.getByCategorySlug(c).then(function(e){t.products=e.data}),a.getByCategorySlug(c).then(function(e){t.category=e.data}),t.deleteProduct=function(o,n){if(!confirm("Are you really want to delete this product?"))return!1;t.products.splice(n,1),e.post("api/admin/products/delete/",{token:s.raw(),product:o},function(){console.log("Error on communicate with API.")})},t.deleteCategory=function(t){if(!confirm("Are you really want to delete this category?"))return!1;e.post("api/admin/categories/delete/",{token:s.raw(),category:t}).then(function(){o.path("/admin/categories")},function(){console.log("Error on communicate with API.")})}}]),controllersAdmin.controller("adminHome",["$scope","$http","$uibModal","sliderFactory","$timeout",function(t,e,o,n,r){var i;t.owlProperties={animateIn:"fadeIn",animateOut:"fadeOut",lazyLoad:!0,loop:!0,items:1,autoplay:!1,autoplayHoverPause:!0,nav:!0,dots:!1,navText:["<span class='glyphicon glyphicon-chevron-left'></span>","<span class='glyphicon glyphicon-chevron-right'></span>"]},t.ready=function(t){i=t},t.$watch(function(){t.items=n.show()}),t.removeItem=function(e){if(!confirm("Are you really want to delete this promotion?"))return!1;t.items.length>1&&(i.trigger("next.owl.carousel"),n.delete(t.items[e]),$(".owl-carousel").trigger("remove.owl.carousel",[e]).trigger("refresh.owl.carousel"),t.items.splice(e,1))},t.promotion={},t.showForm=function(){o.open({templateUrl:"partials/modal.html",controller:ModalInstanceCtrl,scope:t,resolve:{userForm:function(){return t.userForm}}}).result.then(function(e){t.promotion={}},function(){t.promotion={}})}}]);var ModalInstanceCtrl=function(t,e,o,n,r,i){var a=t.uploader=new i({token:o.raw(),url:"api/admin/images/uploadPromo/",queueLimit:1});a.filters.push({name:"imageFilter",fn:function(t,e){var o="|"+t.type.slice(t.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(o)}}),a.onCompleteItem=function(e,o,n,r){t.promotion.src="uploads/promotions/"+e._file.name},t.submitForm=function(r){t.form.userForm.$valid?(n.close(),e.post("api/admin/promotions/create/",{token:o.raw(),promotion:r}).then(function(){var e='<div class="item"><a href="'+r.link+'"><img src="'+r.src+'" alt=""></a></div><div class="btn-group"><a class="btn btn-default" href="#/cart"><span class="glyphicon glyphicon-pencil"></span></a><button class="btn btn-default" ng-click="showForm()"><span class="glyphicon glyphicon-upload"></span></button><button type="button" class="btn btn-gray" ng-click="removeItem('+r.position+');"><span class="glyphicon glyphicon-trash"></span></button></div>';$(".owl-carousel").trigger("add.owl.carousel",[$('<div class="owl-item" style="width: 100%">'+e+"</div>")]).trigger("refresh.owl.carousel"),t.promotion={}},function(){console.log("Error on communicate with API.")})):console.log(t.form.userForm.error)},t.cancel=function(){n.dismiss("cancel")}},controllersNavigation=angular.module("controllersNavigation",["myDirectives"]);controllersNavigation.controller("navigation",["$scope","$http","$location","checkToken","store","cartService","categoriesService",function(t,e,o,n,r,i,a){t.navigation=function(){return/^\/admin/.test(o.path())?(n.isAdmin()||(window.location.href="#/products?alert=notAdmin"),"partials/admin/navigation.html"):("notAdmin"==o.search().alert?t.notAdmin=!0:t.notAdmin=!1,n.loggedIn()?t.loggedIn=!0:t.loggedIn=!1,n.isAdmin()?t.isAdmin=!0:t.isAdmin=!1,"partials/site/navigation.html")},t.isActive=function(t){return o.path()===t},t.$watch(function(){t.cart=i.show()}),t.logout=function(){n.del(),o.path("/products")},t.removeItem=function(e){t.cart.splice(e,1),i.update(t.cart)},a.getData().then(function(e){t.categories=e.data}),t.$on("ngRepeatFinished",function(){var e=$(".nav-bottom .nav");$(".nav-bottom .nav li.active").length&&(e.append("<li id='magic-line'></li>"),t.magicLine=$("#magic-line"),t.magicLine.width($(".nav-bottom .nav li.active").width()).css("left",$(".nav-bottom .nav li.active").position().left).data("origLeft",t.magicLine.position().left).data("origWidth",t.magicLine.width()),$(".nav-bottom .nav li").hover(function(){t.el=$(this),t.leftPos=t.el.position().left,t.newWidth=t.el.width(),t.magicLine.stop().animate({left:t.leftPos,width:t.newWidth})},function(){t.magicLine.stop().animate({left:t.magicLine.data("origLeft"),width:t.magicLine.data("origWidth")})}),$(".nav-bottom .nav li").click(function(){t.el=$(this),t.leftPos=t.el.position().left,t.newWidth=t.el.width(),t.magicLine.data("origLeft",t.el.position().left).data("origWidth",t.el.width()),t.magicLine.stop().animate({left:t.leftPos,width:t.newWidth})}))})}]);var controllersSite=angular.module("controllersSite",["myDirectives","angular-owl-carousel-2"]);controllersSite.controller("siteProducts",["$scope","$http","cartService","categoriesService","productsService",function(t,e,o,n,r){e.get("api/site/products/get").then(function(e){t.products=e.data,angular.forEach(t.products,function(t){r.getCategoryName(t.category).then(function(e){t.categoryName=e.data.replace(/['"]+/g,"")})})},function(){console.log("Error on communicate with API.")}),t.$watch(function(){t.cart=o.show()}),t.addToCart=function(t){o.add(t)},t.checkCart=function(t){o.show().length&&angular.forEach(o.show(),function(e){e.id==t.id&&(t.amount=e.amount)})}}]),controllersSite.controller("siteProduct",["$scope","$http","$routeParams","cartService",function(t,e,o,n){var r=o.id;e.post("api/site/products/get/"+r).then(function(e){t.product=e.data,t.checkCart(e.data)},function(){console.log("Error on communicate with API.")}),t.addToCart=function(t){n.add(t)},t.checkCart=function(t){n.show().length&&angular.forEach(n.show(),function(e){e.id==t.id&&(t.amount=e.amount)})},function(){e.get("api/site/products/getImages/"+r).then(function(e){t.images=e.data},function(){console.log("Error on communicate with API.")})}()}]),controllersSite.controller("siteOrders",["$scope","$http","checkToken",function(t,e,o){e.post("api/site/orders/get/",{token:o.raw(),payload:o.payload()}).then(function(e){t.orders=e,angular.forEach(t.orders,function(e,o){var n=JSON.parse(e.items);t.orders[o].items=n})},function(){console.log("Error on communicate with API.")})}]),controllersSite.controller("cartCtrl",["$scope","$http","$filter","cartService","checkToken",function(t,e,o,n,r){t.cart=n.show(),t.emptyCart=function(){n.empty()},t.total=function(){var e=0;return angular.forEach(t.cart,function(t){e+=t.amount*t.price}),e=o("number")(e,2)},t.removeItem=function(e){t.cart.splice(e,1),n.update(t.cart)},t.setOrder=function(o){if(o.preventDefault(),!r.loggedIn())return t.alert={type:"warning",msg:"You have to be logged in."},!1;e.post("api/site/orders/create/",{token:r.raw(),payload:r.payload(),items:t.cart,total:t.total()}).then(function(e){n.empty(),t.alert={type:"success",msg:"Order in process. Dont refresh the page."},$("#paypalForm").submit()},function(){console.log("Error on communicate with API.")})},t.$watch(function(){n.update(t.cart)})}]),controllersSite.controller("siteOrders",["$scope","$http","checkToken",function(t,e,o){e.post("api/site/orders/get/",{token:o.raw(),payload:o.payload()}).then(function(e){t.orders=e.data,angular.forEach(t.orders,function(e,o){var n=JSON.parse(e.items);t.orders[o].items=n})},function(){console.log("Error on communicate with API.")})}]),controllersSite.controller("siteCategory",["$scope","$http","$routeParams","cartService","productsService","categoriesService",function(t,e,o,n,r,i){var a=o.slug;r.getByCategorySlug(a).then(function(e){t.products=e.data}),i.getData().then(function(e){t.categories=e.data}),t.addToCart=function(t){n.add(t)},t.checkCart=function(t){n.show().length&&angular.forEach(n.show(),function(e){e.id==t.id&&(t.amount=e.amount)})}}]),controllersSite.controller("login",["$scope","$http","store","checkToken","$location",function(t,e,o,n,r){n.loggedIn()&&r.path("/products"),t.user={},t.formSubmit=function(n){e.post("api/site/user/login/",{email:n.email,password:n.password}).then(function(e){t.submit=!0,t.error=e.error,e.error||(o.set("token",e.data.token),r.path("/products"))},function(){console.log("Error on communicate with API.")})}}]),controllersSite.controller("register",["$scope","$http",function(t,e){t.user={},t.formSubmit=function(o){e.post("api/site/user/create/",{user:o,firstName:o.firstName,lastName:o.lastName,email:o.email,password:o.password,passconf:o.passconf}).then(function(e){t.submit=!0,t.user={},e?t.errors=e.data:(t.errors={},t.success=!0)},function(){console.log("Error on communicate with API.")})}}]),controllersSite.controller("siteHome",["$scope","$http","$timeout",function(t,e,o){var n;t.items=[1,2,3,4,5,6,7,8,10],t.properties={animateIn:"fadeIn",lazyLoad:!0,loop:!0,items:1,autoplay:!0,autoplayHoverPause:!0,nav:!0,dots:!1,navText:["<span class='glyphicon glyphicon-chevron-left'></span>","<span class='glyphicon glyphicon-chevron-right'></span>"]},t.ready=function(t){n=t}}]);