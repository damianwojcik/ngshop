<form ng-submit="createCategory(category, products)">

    <div class="container">

        <div class="row">

            <div class="col-sm-6">

                <div class="form-group">

                    <label for="name">Category name:</label>
                    <input id="name" type="text" class="form-control" ng-model="category.name" required>

                </div>

                <div class="form-group">

                    <label for="products">Products:</label>

                    <br>

                    <ui-select id="products" name="products" ng-model="products.selected" sortable="true" close-on-select="false" multiple>
                        <ui-select-choices repeat="product in products | filter: { name: $select.search }">
                            <div ng-bind-html="product.name | highlight: $select.search"></div>
                        </ui-select-choices>
                        <ui-select-match placeholder="Select products...">{{ $item.name }}</ui-select-match>
                    </ui-select>

                    <br>

                    <small>
                        Showing products from category 'uncategorized'.
                    </small>

                </div>

            </div>


        </div>

        <div class="row">

            <div class="col-sm-12">

                <hr>

                <button class="btn btn-primary" type="submit" ng-if="!success">Add category</button>
                <button class="btn btn-success" type="button" ng-if="success" disabled>Adding category...</button>
                <a href="#/admin/categories" class="btn btn-default">Return</a>

            </div>

        </div>

    </div>

</form>